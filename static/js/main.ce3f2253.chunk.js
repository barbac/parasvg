(this.webpackJsonpparasvg=this.webpackJsonpparasvg||[]).push([[0],{55:function(e){e.exports=JSON.parse('{"guides":[{"direction":1,"label":"","length":0,"lengthExpresion":1562.5,"originIndex":null,"pos":573.462036132812,"type":"h"},{"direction":1,"label":"","length":0,"lengthExpresion":93.75,"originIndex":null,"pos":344.409515380859,"type":"v"},{"direction":1,"label":"","length":9.93,"lengthExpresion":9.93,"originIndex":null,"pos":373.615397733801,"type":"v"},{"direction":1,"label":"","length":31.31,"lengthExpresion":31.31,"originIndex":null,"pos":436.497750674977,"type":"v"},{"direction":1,"label":"middle","length":50.39,"lengthExpresion":50.39,"originIndex":null,"pos":492.615397733801,"type":"v"},{"direction":1,"label":"","length":80.31,"lengthExpresion":80.31,"originIndex":null,"pos":337.256153779871,"type":"h"},{"direction":1,"label":"","length":111.59,"lengthExpresion":111.59,"originIndex":null,"pos":245.256153779871,"type":"h"},{"direction":1,"label":"","length":121.99,"lengthExpresion":121.99,"originIndex":null,"pos":214.667918485754,"type":"h"},{"direction":1,"label":"","length":130.83,"lengthExpresion":130.83,"originIndex":null,"pos":188.667918485754,"type":"h"}],"mirror":true,"name":"tank top - front","parameters":[{"name":"body","parameters":{"Shoulder":20,"Waist":94}},{"name":"customization","parameters":{"Waist extra":1}}],"scale":0.34,"vertices":[{"anchorX":1,"anchorY":0,"type":"end","x":344.409515380859,"y":573.462036132812},{"anchorX":1,"anchorY":5,"type":"end","x":344.409515380859,"y":337.256153779871},{"anchorX":-1,"anchorY":null,"type":"control","x":405.478210449219,"y":326.493041992188},{"anchorX":2,"anchorY":7,"type":"end","x":373.615397733801,"y":214.667918485754},{"anchorX":3,"anchorY":8,"type":"end","x":436.497750674977,"y":188.667918485754},{"anchorX":-1,"anchorY":6,"type":"control","x":452.626861572266,"y":245.256153779871},{"anchorX":4,"anchorY":6,"type":"end","x":492.615397733801,"y":245.256153779871},{"anchorX":4,"anchorY":0,"type":"end","x":492.615397733801,"y":573.462036132812}]}')},56:function(e){e.exports=JSON.parse('{"guides":[{"direction":1,"label":"","length":0,"lengthExpresion":500,"originIndex":null,"pos":573.462036132812,"type":"h"},{"direction":1,"label":"","length":0,"lengthExpresion":30,"originIndex":null,"pos":13.9200716018677,"type":"v"},{"direction":1,"label":"","length":8.32,"lengthExpresion":8.32,"originIndex":null,"pos":39.9200716018677,"type":"v"},{"direction":1,"label":"","length":28.48,"lengthExpresion":28.48,"originIndex":null,"pos":102.920071601868,"type":"v"},{"direction":1,"label":"","length":64.96,"lengthExpresion":64.96,"originIndex":null,"pos":216.920071601868,"type":"v"},{"direction":1,"label":"","length":84.8,"lengthExpresion":84.8,"originIndex":null,"pos":278.920071601868,"type":"v"},{"direction":1,"label":"waist","length":94,"lengthExpresion":"Waist","originIndex":null,"pos":307.670071601868,"type":"v"},{"direction":1,"label":"","length":75.84,"lengthExpresion":75.84,"originIndex":null,"pos":336.462036132812,"type":"h"},{"direction":1,"label":"","length":114.24,"lengthExpresion":114.24,"originIndex":null,"pos":216.462036132812,"type":"h"},{"direction":1,"label":"","length":122.88,"lengthExpresion":122.88,"originIndex":null,"pos":189.462036132812,"type":"h"}],"mirror":false,"name":"tank top - back","parameters":[{"name":"body","parameters":{"Shoulder":20,"Waist":94}},{"name":"customization","parameters":{"Waist extra":1}}],"scale":0.32,"vertices":[{"anchorX":1,"anchorY":0,"type":"end","x":13.9200716018677,"y":573.462036132812},{"anchorX":1,"anchorY":7,"type":"end","x":13.9200716018677,"y":336.462036132812},{"anchorX":-1,"anchorY":7,"type":"control","x":76.3358764648438,"y":336.462036132812},{"anchorX":2,"anchorY":8,"type":"end","x":39.9200716018677,"y":216.462036132812},{"anchorX":3,"anchorY":9,"type":"end","x":102.920071601868,"y":189.462036132812},{"anchorX":-1,"anchorY":8,"type":"control","x":163.448593139648,"y":216.462036132812},{"anchorX":4,"anchorY":9,"type":"end","x":216.920071601868,"y":189.462036132812},{"anchorX":5,"anchorY":8,"type":"end","x":278.920071601868,"y":216.462036132812},{"anchorX":-1,"anchorY":7,"type":"control","x":243.825775146484,"y":336.462036132812},{"anchorX":6,"anchorY":7,"type":"end","x":307.670074462891,"y":336.462036132812},{"anchorX":6,"anchorY":0,"type":"end","x":307.670074462891,"y":573.462036132812}]}')},63:function(e,t,n){},64:function(e,t,n){},81:function(e,t){},89:function(e,t,n){"use strict";n.r(t);var r=n(7),o=n.n(r),c=n(37),a=n(40),i=n(47),l=n(34);a.a.use(i.a).use(l.e).init({resources:{en:{translation:{"New pattern":"New pattern",Patterns:"Patterns","New name":"New name",Save:"save","Background image url":"Background image url","Background image":"Background image",Scale:"Scale",Guides:"Guides",gcode:"gcode",Generate:"Generate",Move:"Move","Vertical guide":"Vertical guide","Horizontal guide":"Horizontal guide","Add vertex":"Add vertex","Convert to curve":"convert to curve",Mirror:"Mirror",Undo:"Undo",Redo:"Redo"}},es:{translation:{"New pattern":"Nuevo patr\xf3n",Patterns:"Patrones","New name":"Nuevo nombre",Save:"Guardar","Background image url":"url para imagen de fondo","Background image":"Imagen de fondo",Scale:"Escala",Guides:"Gu\xedas",gcode:"gcode",Generate:"Generar",Move:"Mover","Vertical guide":"Gu\xeda vertical","Horizontal guide":"Gu\xeda horizontal","Add vertex":"Agregar v\xe9rtice","Convert to curve":"Convertir a curva",Mirror:"Reflejar",Undo:"Deshacer",Redo:"Rehacer"}}},interpolation:{escapeValue:!1},detection:{order:["localStorage","navigator","htmlTag"]}});n(63),n(64);var s=n(12),u=n(10),d=n(11),h=n(50),p=n(5);function g(e){var t=e.vertices,n=e.onMouseDown,r=e.onClick;return Object(p.jsx)(p.Fragment,{children:t.map((function(e,t){var o=e.x,c=e.y,a=e.type;return Object(p.jsxs)("g",{className:"handle",onMouseDown:function(){return n(t)},onClick:function(){return r(t)},children:[Object(p.jsx)("circle",{cx:o,cy:c,className:"".concat(t?a:"start"),r:8}),Object(p.jsx)("text",{x:o-4,y:c+4,children:t})]},t)}))})}var x=n(33),j=function(){return Object(x.b)()},v=x.c,b=n(93),f=n(92),y=n(30),O=Object(b.a)(f.a),m={name:"",scale:1,mirror:!1,vertices:[],guides:[{type:"h",originIndex:null,pos:500,length:500,lengthExpresion:500,direction:1,label:""},{type:"v",originIndex:null,pos:30,length:30,lengthExpresion:30,direction:1,label:""}],parameters:[{name:"body",parameters:{Waist:94,Shoulder:20}},{name:"customization",parameters:{"Waist extra":1}}]};function M(e,t,n){var r=0;if(e.type===J){r=(t[0].pos-e.pos)*n}else{var o=t[1];r=(e.pos-o.pos)*n}return r=Math.round(100*r)/100}function w(e,t,n){e.forEach((function(e){t.type===J&&e.anchorY===n?e.y=t.pos:t.type===Z&&e.anchorX===n&&(e.x=t.pos)}))}function C(e,t,n){if(!(t<2)){var r=n.guides[t];r.lengthExpresion=e;var o=0;try{var c={};n.parameters.forEach((function(e){for(var t in e.parameters)c[t]=e.parameters[t]})),n.guides.forEach((function(e){e.label&&(c[e.label]=e.length)})),o=O.evaluate("".concat(e),c)}catch(l){return void console.log(l)}if("number"===typeof o){if(r.length=o,r.type===J){var a=n.guides[0];r.pos=a.pos-r.length/n.scale}else{var i=n.guides[1];r.pos=i.pos+r.length/n.scale}w(n.vertices,r,t)}}}var k=Object(y.b)({name:"pattern",initialState:m,reducers:{setPattern:function(e,t){console.log("loading state");var n=t.payload,r=n.name,o=n.scale,c=n.mirror,a=n.vertices,i=n.guides,l=n.parameters;e.name=r,e.scale=o,e.mirror=c,e.vertices=a,e.guides=i,e.parameters=l},setName:function(e,t){e.name=t.payload},setScale:function(e,t){var n=e.scale;e.scale=t.payload;var r=e.scale/n;e.guides.forEach((function(t,n){var o=t.length;t.length*=r,t.length=Math.round(100*t.length)/100,t.lengthExpresion===o&&(t.lengthExpresion=t.length),e.guides.forEach((function(t,n){C(t.lengthExpresion,n,e)}))}))},setMirror:function(e,t){e.mirror=t.payload},toggleMirror:function(e,t){e.mirror=!e.mirror},clearVertices:function(e,t){e.vertices=[]},setVertices:function(e,t){e.vertices=t.payload},addVertex:function(e,t){e.vertices.push(t.payload)},setVertexValue:function(e,t){e.vertices[t.payload.index]=t.payload.vertex},clearGuides:function(e,t){e.guides=Object(u.a)(m.guides)},addGuide:function(e,t){var n=e.guides.push(t.payload)-1,r=e.guides[n];r.length=M(r,e.guides,e.scale),r.lengthExpresion=r.length},setGuideLabel:function(e,t){e.guides[t.payload.index].label=t.payload.label},setGuidePos:function(e,t){var n=t.payload.index,r=e.guides[n],o=t.payload,c=o.x,a=o.y;if(r.pos=r.type===J?a:c,n<2){r.length=0;for(var i=2,l=e.guides.length;i<l;i++){var s=e.guides[i];s.type===r.type&&(s.length===s.lengthExpresion?(s.length=M(s,e.guides,e.scale),s.lengthExpresion=s.length):C(s.lengthExpresion,i,e))}}else r.length=M(r,e.guides,e.scale),r.lengthExpresion=r.length;w(e.vertices,r,n)},setGuideLength:function(e,t){var n=t.payload.index;C(t.payload.length,n,e)},setParameterValue:function(e,t){e.parameters[t.payload.index].parameters[t.payload.name]=t.payload.value,e.guides.forEach((function(t,n){C(t.lengthExpresion,n,e)}))},finishDragging:function(e,t){}}}),E=k.actions,S=E.setName,N=E.setScale,G=(E.setMirror,E.toggleMirror),I=E.clearVertices,X=E.setVertices,Y=E.addVertex,P=E.setVertexValue,V=E.clearGuides,A=E.addGuide,L=E.setGuideLabel,B=E.setGuidePos,T=E.setGuideLength,K=E.setParameterValue,R=E.finishDragging,D=function(e){return e.pattern.present},W=function(e){return e.pattern.present.mirror},z=function(e){return e.pattern.present.vertices},H=function(e){return e.pattern.present.guides},U=function(e){return e.pattern.present.parameters},F=k.reducer,J="h",Z="v";function Q(e){var t=e.width,n=e.height,r=e.onMouseDown,o=v(H);return Object(p.jsx)(p.Fragment,{children:o.map((function(e,o){var c=e.pos,a={};return a=e.type===J?{x1:0,x2:t,y1:c,y2:c}:{x1:c,x2:c,y1:0,y2:n},Object(p.jsxs)("g",{className:"guide",onMouseDown:function(){return r(o)},children:[Object(p.jsx)("line",Object(s.a)(Object(s.a)({},a),{},{className:"hover"})),Object(p.jsx)("line",Object(s.a)({},a))]},o)}))})}var $=n(94);function q(e){var t=e.x,n=e.y,o=e.index,c=(e.firstPoint,e.scale,e.children),a=Object($.a)().t,i=Object(r.useState)(!1),l=Object(d.a)(i,2),s=l[0],u=l[1],h=j(),g=v(H)[o];return Object(p.jsxs)("g",{className:"measurement",onClick:function(){return u(!s)},children:[c,s?Object(p.jsx)("foreignObject",{width:"150",height:"1.5em",x:t-150,y:n-20,children:Object(p.jsx)("input",{onClick:function(e){return e.stopPropagation()},type:"text",value:g.label,placeholder:a("label"),onChange:function(e){return h(L({label:e.target.value,index:o}))}})}):Object(p.jsx)("text",{x:t,y:n,children:g.label}),s&&Object(p.jsx)("foreignObject",{width:"100",height:"1.5em",x:t+20,y:n-20,children:Object(p.jsx)("input",{onClick:function(e){return e.stopPropagation()},type:"text",placeholder:a("value"),value:g.lengthExpresion,onChange:function(e){var t=e.target.value;h(T({length:t,index:o}))}})})]})}function _(e){var t=e.width,n=e.height,r=e.scale,o=v(H),c=[],a=[];o.forEach((function(e,t){var n=e.pos,r=e.length;e.type===J?c.push([n,r,t]):a.push([n,r,t])}));var i=c.length?c.shift()[0]:0,l=a.length?a.shift()[0]:0;return Object(p.jsxs)(p.Fragment,{children:[c.map((function(e,n){var o=Object(d.a)(e,3),a=o[0],u=o[1],h=o[2],g=Math.abs(a-i),x=t/(c.length+1)*(n+1),j=i-g/2,v={x1:x,x2:x,y1:a,y2:i};return Object(p.jsxs)(q,{x:x,y:j-5,index:h,firstPoint:l,scale:r,children:[Object(p.jsx)("line",Object(s.a)({},v)),Object(p.jsx)("polyline",{points:"".concat(x,",").concat(a," ").concat(x+3,",").concat(a+3," ").concat(x-3,",").concat(a+3," ").concat(x,",").concat(a)}),Object(p.jsx)("polyline",{points:"".concat(x,",").concat(i," ").concat(x+3,",").concat(i-3," ").concat(x-3,",").concat(i-3," ").concat(x,",").concat(i)}),Object(p.jsx)("text",{x:x,y:j+15,children:u})]},n+"v")})),a.map((function(e,t){var o=Object(d.a)(e,3),c=o[0],i=o[1],u=o[2],h=Math.abs(c-l),g=n/(a.length+1)*(t+1),x=l+h/2,j={x1:l,x2:c,y1:g,y2:g};return Object(p.jsxs)(q,{x:x,y:g-5,index:u,firstPoint:l,scale:r,children:[Object(p.jsx)("line",Object(s.a)({},j)),Object(p.jsx)("polyline",{points:"".concat(l,",").concat(g," ").concat(l+3,",").concat(g+3," ").concat(l+3,",").concat(g-3," ").concat(l,",").concat(g)}),Object(p.jsx)("polyline",{points:"".concat(c,",").concat(g," ").concat(c-3,",").concat(g-3," ").concat(c-3,",").concat(g+3," ").concat(c,",").concat(g)}),Object(p.jsx)("text",{y:g+15,x:x,children:i})]},t+"v")}))]})}function ee(e){if(e.length<3)return e;var t=e.length-1,n=[];e.forEach((function(e,r){r!==t&&n.push(e)}));for(var r=2*e[t].x,o=t;o>=0;o--){var c=e[o],a=Object(s.a)({},c);a.x=r-c.x,n.push(a)}return n}var te=ee;function ne(e){var t=e.vertices,n=e.mirror;if(!t.length)return null;t=n?ee(t):t;var r=!1,o=t.map((function(e,t){var n=e.x,o=e.y;return"control"===e.type?(r=!0,"Q ".concat(n,",").concat(o)):r?(r=!1," ".concat(n,", ").concat(o)):"L ".concat(n,", ").concat(o)})),c="M ".concat(t[0].x,", ").concat(t[0].y,"\n")+o.join("\n")+" Z";return Object(p.jsx)("path",{className:"path",d:c,stroke:"LightSkyBlue",strokeWidth:"1",strokeOpacity:"1",opacity:"1",fillOpacity:"0"})}var re=n(57);var oe=Object(y.b)({name:"tools",initialState:{toolMode:"move"},reducers:{selectToolMode:function(e,t){e.toolMode=t.payload},setToolState:function(e,t){e.toolMode=t.payload}}}),ce=oe.actions.setToolState,ae=function(e){return e.toolbox.toolMode},ie=oe.reducer,le=n(31),se=n.n(le),ue=Object(y.a)({reducer:{pattern:se()(F,{filter:Object(le.excludeAction)(["pattern/setGuidePos","pattern/setVertexValue"])}),toolbox:ie}}),de=n(55),he=n(56),pe="PATTERN:";var ge={load:function(e){if(console.log("loading..."),"tank top - back - sample"!==e){if("tank top - front - sample"!==e){var t=window.localStorage.getItem(pe+e);if(t){var n=JSON.parse(t);console.log(n),ue.dispatch({type:"pattern/setPattern",payload:n})}else console.log("pattern: ".concat(e," not found"),e)}else ue.dispatch({type:"pattern/setPattern",payload:he})}else ue.dispatch({type:"pattern/setPattern",payload:de})},save:function(){var e=ue.getState().pattern.present;""!==e.name&&(console.log("saving",e),window.localStorage.setItem(pe+e.name,JSON.stringify(e)))}};function xe(e){var t=e.onChange,n=Object($.a)().t;return Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{children:n("Background image")}),Object(p.jsx)("div",{children:Object(p.jsx)("input",{type:"file",accept:"image/*",onChange:function(e){var n=new FileReader,r=e.target.files[0];n.onload=function(e){return t(r.name,e.target.result)},n.readAsDataURL(e.target.files[0])}})})]})}var je="screen and (max-device-width: 800px)";function ve(e){var t=e.className,n=e.children,o=Object(r.useState)(!0),c=Object(d.a)(o,2),a=c[0],i=c[1],l=window.matchMedia(je).matches;return Object(r.useLayoutEffect)((function(){window.matchMedia(je).matches&&i(!1)}),[l]),Object(p.jsxs)("div",{className:t,children:[Object(p.jsx)("button",{className:"toggle-controls",onClick:function(e){return i(!a)},children:a?"-":"o"}),Object(p.jsx)("div",{style:{display:a?"":"none"},children:n})]})}function be(){var e=v(U),t=j(),n=e.map((function(e,n){var r=e.name,o=e.parameters,c=[],a=function(e){c.push(Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{children:e}),Object(p.jsx)("input",{type:"number",value:o[e],onChange:function(r){var o=r.target.valueAsNumber;Number.isNaN(o)||t(K({index:n,name:e,value:o}))}})]},e))};for(var i in o)a(i);return Object(p.jsxs)("div",{children:[n&&Object(p.jsx)("div",{children:"---"}),Object(p.jsx)("div",{style:{marginBottom:10},children:r}),Object(p.jsx)(p.Fragment,{children:c})]},r)}));return Object(p.jsx)("div",{className:"parameters",children:n})}function fe(e){e.image;var t=e.onBackgroundSelected,n=e.onNewAction,o=e.onSaveAction,c=e.onLoadAction,i=e.gcode,l=e.onGcodeAction,s=e.svg,h=e.onSvgAction,g=Object($.a)().t,x=j(),b=v(H).map((function(e,t){var n=e.lengthExpresion,r=e.label;return t<2?null:Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{children:r||t-1}),Object(p.jsx)("div",{children:Object(p.jsx)("input",{type:"text",value:n,onChange:function(e){var n={length:e.target.value,index:t};x(T(n))}})})]},t)})),f=Object(r.useState)(""),y=Object(d.a)(f,2),O=y[0],m=y[1],M=v(D),w="PATTERN:",C=[""].concat(Object(u.a)(Object.keys(window.localStorage).filter((function(e){return!e.indexOf(w)})).map((function(e){return e.replace(w,"")})))),k="tank top - back - sample";window.localStorage.getItem(k)||C.push(k);window.localStorage.getItem("tank top - front - sample")||C.push("tank top - front - sample");var E=C.map((function(e){return Object(p.jsx)("option",{value:e,children:e},e)}));return Object(p.jsx)(ve,{className:"controls",children:Object(p.jsxs)("form",{children:[Object(p.jsxs)("select",{onChange:function(e){return a.a.changeLanguage(e.currentTarget.value)},style:{width:"unset"},children:[Object(p.jsx)("option",{value:"en",children:"English"}),Object(p.jsx)("option",{value:"es",children:"Espa\xf1ol"})]}),Object(p.jsx)("div",{children:Object(p.jsx)("div",{children:Object(p.jsx)("input",{type:"button",value:g("New pattern"),onClick:function(){return n()}})})}),Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{children:g("Patterns")}),Object(p.jsx)("div",{children:Object(p.jsx)("select",{onChange:function(e){return c(e.target.value)},children:E})})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{children:g("New name")}),Object(p.jsx)("div",{children:Object(p.jsx)("input",{type:"text",value:M.name,onChange:function(e){return x(S(e.target.value))}})}),Object(p.jsx)("div",{children:Object(p.jsx)("input",{value:g("Save"),type:"button",onClick:function(){return o()}})})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{children:g("Background image url")}),Object(p.jsx)("div",{children:Object(p.jsx)("input",{type:"text",value:O,onChange:function(e){var n=e.target.value;m(n),t(n)}})})]}),Object(p.jsx)(xe,{onChange:function(e,n){m(e),t(n)}}),Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{children:g("Scale")}),Object(p.jsx)("div",{children:Object(p.jsx)("input",{type:"number",value:M.scale,onChange:function(e){return x(N(e.target.valueAsNumber))}})})]}),Object(p.jsx)("div",{children:g("Parameters")}),Object(p.jsx)(be,{}),Object(p.jsx)("div",{children:g("Guides")}),b,Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{children:"svg"}),Object(p.jsx)("div",{children:Object(p.jsx)("input",{type:"button",value:g("Generate"),onClick:function(){return h()}})}),Object(p.jsx)("textarea",{value:s,readOnly:!0,onClick:function(e){return e.target.select()}})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{children:g("gcode")}),Object(p.jsx)("div",{children:Object(p.jsx)("input",{type:"button",value:g("Generate"),onClick:function(){return l()}})}),Object(p.jsx)("textarea",{value:i,readOnly:!0,onClick:function(e){return e.target.select()}})]})]})})}var ye=n(58),Oe=["path"],me=25;function Me(e){var t=e.title,n=e.tool,r=e.toolMode,o=e.onClick,c=e.children;return Object(p.jsx)("button",{title:t,className:r===n?"active":"",onClick:function(){return o()},children:c})}function we(e){var t=e.path,n=Object(ye.a)(e,Oe);return Object(p.jsx)(Me,Object(s.a)(Object(s.a)({},n),{},{children:Object(p.jsx)("svg",{width:me,height:me,children:Object(p.jsx)("path",{d:t,fillOpacity:"0%"})})}))}function Ce(){var e=j(),t=v(W),n=v(ae),r=Object($.a)().t;return Object(p.jsx)(ve,{className:"toolbox",children:Object(p.jsxs)("div",{className:"tools",children:[Object(p.jsx)(Me,{title:r("Move"),onClick:function(){return e(ce("move"))},tool:"move",toolMode:n,children:Object(p.jsx)("svg",{viewBox:"0 0 320 512",width:"25",height:"25",children:Object(p.jsx)("path",{d:"M302.189 329.126H196.105l55.831 135.993c3.889 9.428-.555 19.999-9.444 23.999l-49.165 21.427c-9.165 4-19.443-.571-23.332-9.714l-53.053-129.136-86.664 89.138C18.729 472.71 0 463.554 0 447.977V18.299C0 1.899 19.921-6.096 30.277 5.443l284.412 292.542c11.472 11.179 3.007 31.141-12.5 31.141z"})})}),Object(p.jsx)(we,{path:"M10,0 V20",tool:"vguide",toolMode:n,title:r("Vertical guide"),onClick:function(){return e(ce("vguide"))}}),Object(p.jsx)(we,{path:"M0,10 H20",tool:"hguide",toolMode:n,title:r("Horizontal guide"),onClick:function(){return e(ce("hguide"))}}),Object(p.jsx)(Me,{title:r("Add vertex"),onClick:function(){return e(ce("handle"))},tool:"handle",toolMode:n,children:Object(p.jsx)("svg",{width:me,height:me,children:Object(p.jsx)("circle",{cx:12.5,cy:12.5,r:6.25,fill:"#000"})})}),Object(p.jsx)(we,{title:r("Convert to curve"),onClick:function(){return e(ce("curve"))},path:"M6,0 Q30,20 6,25",tool:"curve",toolMode:n}),Object(p.jsx)(we,{title:r("Mirror"),onClick:function(){return e(G())},path:"M0,0 Q25,20 0,25 M25,0 Q0,20 25,25",tool:"mirror",toolMode:t?"mirror":""}),Object(p.jsx)(we,{title:r("Undo"),onClick:function(){return e(le.ActionCreators.undo())},path:"M12.5,8C9.85,8 7.45,9 5.6,10.6L2,7V16H11L7.38,12.38C8.77,11.22 10.54,10.5 12.5,10.5C16.04,10.5 19.05,12.81 20.1,16L22.47,15.22C21.08,11.03 17.15,8 12.5,8Z",tool:"undo",toolMode:""}),Object(p.jsx)(we,{title:r("Redo"),onClick:function(){return e(le.ActionCreators.redo())},path:"M18.4,10.6C16.55,9 14.15,8 11.5,8C6.85,8 2.92,11.03 1.54,15.22L3.9,16C4.95,12.81 7.95,10.5 11.5,10.5C13.45,10.5 15.23,11.22 16.62,12.38L13,16H22V7L18.4,10.6Z",tool:"redo",toolMode:""})]})})}var ke="curve",Ee={KeyN:"move",KeyP:"handle",KeyH:"hguide",KeyV:"vguide",KeyC:"clear",KeyS:ke};function Se(){var e,t=j(),n=v(D),o=v(H),c=v(z),a=v(ae),i=function(e){return t(ce(e))},l=Object(r.useState)(null),x=Object(d.a)(l,2),b=x[0],f=x[1],y=Object(r.useState)(null),O=Object(d.a)(y,2),m=O[0],M=O[1],w=Object(r.useState)("pattern.png"),C=Object(d.a)(w,2),k=C[0],E=C[1],L=Object(r.useState)(""),T=Object(d.a)(L,2),K=T[0],W=T[1],U=Object(r.useState)(""),F=Object(d.a)(U,2),$=F[0],q=F[1];function ee(t,n){var r=e.createSVGPoint();r.x=t.clientX,r.y=t.clientY;var o=r.matrixTransform(e.getScreenCTM().inverse());return{type:n,originIndex:null,pos:n===J?o.y:o.x,length:0,lengthExpresion:0,direction:1,label:""}}function oe(){W(function(e,t){if(!e.length)return"";t*=10;var n=e[0],r=e=e.map((function(e){var r=Object(s.a)({},e);return r.x=(e.x-n.x)*t,r.y=(e.y-n.y)*-t,r}));e=Object(u.a)(e),console.log("generating gcode");var o=e.shift();if(!o)return"";var c=[],a=null;return e.forEach((function(e,t){if(t+=1,"control"===e.type)return a=e,void c.push("(control ".concat(t,")"));a?(new re.a(r[t-2].x,r[t-2].y,r[t-1].x,r[t-1].y,e.x,e.y).getLUT(30).forEach((function(e){c.push("G1 X".concat(e.x," Y").concat(e.y," (").concat(t," step)"))})),a=null):c.push("G1 X".concat(e.x," Y").concat(e.y," (").concat(t,")"))})),"G0 Z".concat(10,"\nG0 X").concat(o.x," Y").concat(o.y," (0)\nG1 Z").concat(-5," F").concat(2e3,"\n").concat(c.join("\n"),"\nG0 Z").concat(10,"\n  ")}(n.mirror?te(c):c,n.scale))}var ie={move:function(){},handle:function(n){if(n.altKey)t(I());else{var r=e.createSVGPoint();r.x=n.clientX,r.y=n.clientY;var o=r.matrixTransform(e.getScreenCTM().inverse());t(Y({anchorX:null,anchorY:null,x:o.x,y:o.y,type:"end"}))}},hguide:function(e){t(A(ee(e,J)))},vguide:function(e){t(A(ee(e,Z)))}},le=1e3,se="0 0 ".concat(le," ").concat(600);return Object(p.jsxs)("div",{className:"container",style:{border:"thin solid blue"},children:[Object(p.jsx)("div",{className:"controls",children:Object(p.jsx)(fe,{image:k,onBackgroundSelected:E,onNewAction:function(){console.log("new, clearing."),t(I()),t(V()),i("move"),f(null),M(null),t(N(1)),t(S(""))},onSaveAction:function(){ge.save()},onLoadAction:function(e){""!==e?e!==n.name&&(ge.load(e),i("move"),f(null),M(null)):t(S(""))},gcode:K,onGcodeAction:oe,svg:$,onSvgAction:function(){q(h.renderToStaticMarkup(Object(p.jsx)("svg",{viewBox:se,children:Object(p.jsx)(ne,{vertices:c,mirror:n.mirror})})))}})}),Object(p.jsx)(Ce,{}),Object(p.jsxs)("svg",{id:"svg",ref:function(t){e=t},viewBox:se,className:"background-img",style:{border:"thin solid red",height:"100vh"},onClick:ie[a],onMouseUp:function(){f(null),M(null),t(R())},onMouseMove:function(n){if(null!==b||null!==m){var r=e.createSVGPoint();r.x=n.clientX,r.y=n.clientY;var a=r.matrixTransform(e.getScreenCTM().inverse());if(null!==b){var i=1e3,l=null,s=null;o.forEach((function(e,t){if(e.type===J){var n=Math.abs(e.pos-a.y);n<i&&n<20&&(l=e,s=t,i=n)}})),l&&(a.y=l.pos),i=1e3;var u=null,d=-1;o.forEach((function(e,t){if(e.type===Z){var n=Math.abs(e.pos-a.x);n<i&&n<20&&(u=e,d=t,i=n)}})),u&&(a.x=u.pos);var h={type:c[b].type,anchorY:s,anchorX:d,x:a.x,y:a.y};t(P({vertex:h,index:b}))}else if(null!==m){var p={x:a.x,y:a.y,index:m};t(B(p))}else console.error("weird")}},tabIndex:0,onKeyPress:function(e){var n=e.code;if("KeyC"===n)e.shiftKey&&(t(I()),t(V())),i("move");else if("KeyG"===n)oe(),i("move");else if("KeyI"===n){var r=Object(u.a)(c);r.reverse(),t(X(r)),i("move")}else if("KeyR"===n){if(c.length){var o=c[0].x,a=c.map((function(e){var t=Object(s.a)({},e);return t.x=o-(e.x-o),t}));t(X(a))}i("move")}else"KeyM"===n?t(G()):i(Ee[n])},children:[Object(p.jsx)("image",{href:k,height:"100%"}),Object(p.jsx)(ne,{vertices:c,mirror:n.mirror}),Object(p.jsx)(_,{width:le,height:600,scale:n.scale}),Object(p.jsx)(Q,{width:le,height:600,onMouseDown:M}),Object(p.jsx)(g,{vertices:c,onMouseDown:f,onClick:function(e){if(a===ke){var n=c[e],r=Object(s.a)({},n);r.type="control";r.x=n.x+50,r.y=n.y+50;var o=Object(u.a)(c);o.splice(e,0,r),t(X(o))}}})]})]})}var Ne=function(){return Object(p.jsx)(Se,{})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.render(Object(p.jsx)(o.a.StrictMode,{children:Object(p.jsx)(x.a,{store:ue,children:Object(p.jsx)(Ne,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[89,1,2]]]);
//# sourceMappingURL=main.ce3f2253.chunk.js.map