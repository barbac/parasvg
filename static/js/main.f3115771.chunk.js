(this.webpackJsonpparasvg=this.webpackJsonpparasvg||[]).push([[0],{60:function(e,t,n){},61:function(e,t,n){},77:function(e,t){},85:function(e,t,n){"use strict";n.r(t);var c=n(7),r=n.n(c),o=n(37),a=n(34),i=n(47),l=n(35);a.a.use(i.a).use(l.e).init({resources:{en:{translation:{"New pattern":"New pattern",Patterns:"Patterns","New name":"New name",Save:"save","Background image url":"Background image url","Background image":"Background image",Scale:"Scale",Guides:"Guides",gcode:"gcode",Generate:"Generate",Move:"Move","Vertical guide":"Vertical guide","Horizontal guide":"Horizontal guide","Add vertex":"Add vertex","Convert to curve":"convert to curve",Mirror:"Mirror",Undo:"Undo",Redo:"Redo"}},es:{translation:{"New pattern":"Nuevo patr\xf3n",Patterns:"Patrones","New name":"Nuevo nombre",Save:"Guardar","Background image url":"url para imagen de fondo","Background image":"Imagen de fondo",Scale:"Escala",Guides:"Gu\xedas",gcode:"gcode",Generate:"Generar",Move:"Mover","Vertical guide":"Gu\xeda vertical","Horizontal guide":"Gu\xeda horizontal","Add vertex":"Agregar v\xe9rtice","Convert to curve":"Convertir a curva",Mirror:"Reflejar",Undo:"Deshacer",Redo:"Rehacer"}}},interpolation:{escapeValue:!1},detection:{order:["localStorage","navigator","htmlTag"]}});n(60),n(61);var s=n(12),u=n(10),d=n(11),j=n(5);function h(e){var t=e.vertices,n=e.onMouseDown,c=e.onClick;return Object(j.jsx)(j.Fragment,{children:t.map((function(e,t){var r=e.x,o=e.y,a=e.type;return Object(j.jsxs)("g",{className:"handle",onMouseDown:function(){return n(t)},onClick:function(){return c(t)},children:[Object(j.jsx)("circle",{cx:r,cy:o,className:"".concat(t?a:"start"),r:8}),Object(j.jsx)("text",{x:r-4,y:o+4,children:t})]},t)}))})}var v=n(33),g=function(){return Object(v.b)()},x=v.c,p=n(89),b=n(88),f=n(28),O=Object(p.a)(b.a),m={name:"",scale:1,mirror:!1,vertices:[],guides:[{type:"h",originIndex:null,pos:500,length:500,lengthExpresion:500,direction:1,label:""},{type:"v",originIndex:null,pos:30,length:30,lengthExpresion:30,direction:1,label:""}],parameters:[{name:"body",parameters:{Waist:94,Shoulder:20}},{name:"customization",parameters:{"Waist extra":1}}]};function y(e,t,n){var c=0;if(e.type===Z){c=(t[0].pos-e.pos)*n}else{var r=t[1];c=(e.pos-r.pos)*n}return c=Math.round(100*c)/100}function M(e,t,n){e.forEach((function(e){t.type===Z&&e.anchorY===n?e.y=t.pos:t.type===W&&e.anchorX===n&&(e.x=t.pos)}))}function C(e,t,n){if(!(t<2)){var c=n.guides[t];c.lengthExpresion=e;var r=0;try{var o={};n.parameters.forEach((function(e){for(var t in e.parameters)o[t]=e.parameters[t]})),n.guides.forEach((function(e){e.label&&(o[e.label]=e.length)})),r=O.evaluate("".concat(e),o)}catch(l){return void console.log(l)}if("number"===typeof r){if(c.length=r,c.type===Z){var a=n.guides[0];c.pos=a.pos-c.length/n.scale}else{var i=n.guides[1];c.pos=i.pos+c.length/n.scale}M(n.vertices,c,t)}}}var w=Object(f.b)({name:"pattern",initialState:m,reducers:{setPattern:function(e,t){console.log("loading state");var n=t.payload,c=n.name,r=n.scale,o=n.mirror,a=n.vertices,i=n.guides,l=n.parameters;e.name=c,e.scale=r,e.mirror=o,e.vertices=a,e.guides=i,e.parameters=l},setName:function(e,t){e.name=t.payload},setScale:function(e,t){var n=e.scale;e.scale=t.payload;var c=e.scale/n;e.guides.forEach((function(t,n){var r=t.length;t.length*=c,t.length=Math.round(100*t.length)/100,t.lengthExpresion===r&&(t.lengthExpresion=t.length),e.guides.forEach((function(t,n){C(t.lengthExpresion,n,e)}))}))},setMirror:function(e,t){e.mirror=t.payload},toggleMirror:function(e,t){e.mirror=!e.mirror},clearVertices:function(e,t){e.vertices=[]},setVertices:function(e,t){e.vertices=t.payload},addVertex:function(e,t){e.vertices.push(t.payload)},setVertexValue:function(e,t){e.vertices[t.payload.index]=t.payload.vertex},clearGuides:function(e,t){e.guides=Object(u.a)(m.guides)},addGuide:function(e,t){var n=e.guides.push(t.payload)-1,c=e.guides[n];c.length=y(c,e.guides,e.scale),c.lengthExpresion=c.length},setGuideLabel:function(e,t){e.guides[t.payload.index].label=t.payload.label},setGuidePos:function(e,t){var n=t.payload.index,c=e.guides[n],r=t.payload,o=r.x,a=r.y;if(c.pos=c.type===Z?a:o,n<2){c.length=0;for(var i=2,l=e.guides.length;i<l;i++){var s=e.guides[i];s.type===c.type&&(s.length===s.lengthExpresion?(s.length=y(s,e.guides,e.scale),s.lengthExpresion=s.length):C(s.lengthExpresion,i,e))}}else c.length=y(c,e.guides,e.scale),c.lengthExpresion=c.length;M(e.vertices,c,n)},setGuideLength:function(e,t){var n=t.payload.index;C(t.payload.length,n,e)},setParameterValue:function(e,t){e.parameters[t.payload.index].parameters[t.payload.name]=t.payload.value,e.guides.forEach((function(t,n){C(t.lengthExpresion,n,e)}))},finishDragging:function(e,t){}}}),k=w.actions,N=k.setName,S=k.setScale,G=(k.setMirror,k.toggleMirror),E=k.clearVertices,V=k.setVertices,P=k.addVertex,A=k.setVertexValue,L=k.clearGuides,B=k.addGuide,T=k.setGuideLabel,K=k.setGuidePos,R=k.setGuideLength,D=k.setParameterValue,H=k.finishDragging,I=function(e){return e.pattern.present},X=function(e){return e.pattern.present.mirror},Y=function(e){return e.pattern.present.vertices},z=function(e){return e.pattern.present.guides},U=function(e){return e.pattern.present.parameters},F=w.reducer,Z="h",W="v";function J(e){var t=e.width,n=e.height,c=e.onMouseDown,r=x(z);return Object(j.jsx)(j.Fragment,{children:r.map((function(e,r){var o=e.pos,a={};return a=e.type===Z?{x1:0,x2:t,y1:o,y2:o}:{x1:o,x2:o,y1:0,y2:n},Object(j.jsxs)("g",{className:"guide",onMouseDown:function(){return c(r)},children:[Object(j.jsx)("line",Object(s.a)(Object(s.a)({},a),{},{className:"hover"})),Object(j.jsx)("line",Object(s.a)({},a))]},r)}))})}var Q=n(90);function $(e){var t=e.x,n=e.y,r=e.index,o=(e.firstPoint,e.scale,e.children),a=Object(Q.a)().t,i=Object(c.useState)(!1),l=Object(d.a)(i,2),s=l[0],u=l[1],h=g(),v=x(z)[r];return Object(j.jsxs)("g",{className:"measurement",onClick:function(){return u(!s)},children:[o,s?Object(j.jsx)("foreignObject",{width:"150",height:"1.5em",x:t-150,y:n-20,children:Object(j.jsx)("input",{onClick:function(e){return e.stopPropagation()},type:"text",value:v.label,placeholder:a("label"),onChange:function(e){return h(T({label:e.target.value,index:r}))}})}):Object(j.jsx)("text",{x:t,y:n,children:v.label}),s&&Object(j.jsx)("foreignObject",{width:"100",height:"1.5em",x:t+20,y:n-20,children:Object(j.jsx)("input",{onClick:function(e){return e.stopPropagation()},type:"text",placeholder:a("value"),value:v.lengthExpresion,onChange:function(e){var t=e.target.value;h(R({length:t,index:r}))}})})]})}function q(e){var t=e.width,n=e.height,c=e.scale,r=x(z),o=[],a=[];r.forEach((function(e,t){var n=e.pos,c=e.length;e.type===Z?o.push([n,c,t]):a.push([n,c,t])}));var i=o.length?o.shift()[0]:0,l=a.length?a.shift()[0]:0;return Object(j.jsxs)(j.Fragment,{children:[o.map((function(e,n){var r=Object(d.a)(e,3),a=r[0],u=r[1],h=r[2],v=Math.abs(a-i),g=t/(o.length+1)*(n+1),x=i-v/2,p={x1:g,x2:g,y1:a,y2:i};return Object(j.jsxs)($,{x:g,y:x-5,index:h,firstPoint:l,scale:c,children:[Object(j.jsx)("line",Object(s.a)({},p)),Object(j.jsx)("polyline",{points:"".concat(g,",").concat(a," ").concat(g+3,",").concat(a+3," ").concat(g-3,",").concat(a+3," ").concat(g,",").concat(a)}),Object(j.jsx)("polyline",{points:"".concat(g,",").concat(i," ").concat(g+3,",").concat(i-3," ").concat(g-3,",").concat(i-3," ").concat(g,",").concat(i)}),Object(j.jsx)("text",{x:g,y:x+15,children:u})]},n+"v")})),a.map((function(e,t){var r=Object(d.a)(e,3),o=r[0],i=r[1],u=r[2],h=Math.abs(o-l),v=n/(a.length+1)*(t+1),g=l+h/2,x={x1:l,x2:o,y1:v,y2:v};return Object(j.jsxs)($,{x:g,y:v-5,index:u,firstPoint:l,scale:c,children:[Object(j.jsx)("line",Object(s.a)({},x)),Object(j.jsx)("polyline",{points:"".concat(l,",").concat(v," ").concat(l+3,",").concat(v+3," ").concat(l+3,",").concat(v-3," ").concat(l,",").concat(v)}),Object(j.jsx)("polyline",{points:"".concat(o,",").concat(v," ").concat(o-3,",").concat(v-3," ").concat(o-3,",").concat(v+3," ").concat(o,",").concat(v)}),Object(j.jsx)("text",{y:v+15,x:g,children:i})]},t+"v")}))]})}function _(e){if(e.length<3)return e;var t=e.length-1,n=[];e.forEach((function(e,c){c!==t&&n.push(e)}));for(var c=2*e[t].x,r=t;r>=0;r--){var o=e[r],a=Object(s.a)({},o);a.x=c-o.x,n.push(a)}return n}var ee=_;function te(e){var t=e.vertices,n=e.mirror;if(!t.length)return null;t=n?_(t):t;var c=!1,r=t.map((function(e,t){var n=e.x,r=e.y;return"control"===e.type?(c=!0,"Q ".concat(n,",").concat(r)):c?(c=!1," ".concat(n,", ").concat(r)):"L ".concat(n,", ").concat(r)})),o="M ".concat(t[0].x,", ").concat(t[0].y,"\n")+r.join("\n")+" Z";return Object(j.jsx)("path",{className:"path",d:o,stroke:"LightSkyBlue",strokeWidth:"1",strokeOpacity:"1",opacity:"1",fillOpacity:"0"})}var ne=n(54);var ce=Object(f.b)({name:"tools",initialState:{toolMode:"move"},reducers:{selectToolMode:function(e,t){e.toolMode=t.payload},setToolState:function(e,t){e.toolMode=t.payload}}}),re=ce.actions.setToolState,oe=function(e){return e.toolbox.toolMode},ae=ce.reducer,ie=n(29),le=n.n(ie),se=Object(f.a)({reducer:{pattern:le()(F,{filter:Object(ie.excludeAction)(["pattern/setGuidePos","pattern/setVertexValue"])}),toolbox:ae}}),ue="PATTERN:";var de={load:function(e){console.log("loading...");var t=window.localStorage.getItem(ue+e);if(t){var n=JSON.parse(t);console.log(n),se.dispatch({type:"pattern/setPattern",payload:n})}else console.log("pattern: ".concat(e," not found"),e)},save:function(){var e=se.getState().pattern.present;""!==e.name&&(console.log("saving",e),window.localStorage.setItem(ue+e.name,JSON.stringify(e)))}};function je(e){var t=e.onChange,n=Object(Q.a)().t;return Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{children:n("Background image")}),Object(j.jsx)("div",{children:Object(j.jsx)("input",{type:"file",accept:"image/*",onChange:function(e){var n=new FileReader,c=e.target.files[0];n.onload=function(e){return t(c.name,e.target.result)},n.readAsDataURL(e.target.files[0])}})})]})}var he="screen and (max-device-width: 800px)";function ve(e){var t=e.className,n=e.children,r=Object(c.useState)(!0),o=Object(d.a)(r,2),a=o[0],i=o[1],l=window.matchMedia(he).matches;return Object(c.useLayoutEffect)((function(){window.matchMedia(he).matches&&i(!1)}),[l]),Object(j.jsxs)("div",{className:t,children:[Object(j.jsx)("button",{className:"toggle-controls",onClick:function(e){return i(!a)},children:a?"-":"o"}),Object(j.jsx)("div",{style:{display:a?"":"none"},children:n})]})}function ge(){var e=x(U),t=g(),n=e.map((function(e,n){var c=e.name,r=e.parameters,o=[],a=function(e){o.push(Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{children:e}),Object(j.jsx)("input",{type:"number",value:r[e],onChange:function(c){var r=c.target.valueAsNumber;Number.isNaN(r)||t(D({index:n,name:e,value:r}))}})]},e))};for(var i in r)a(i);return Object(j.jsxs)("div",{children:[n&&Object(j.jsx)("div",{children:"---"}),Object(j.jsx)("div",{style:{marginBottom:10},children:c}),Object(j.jsx)(j.Fragment,{children:o})]},c)}));return Object(j.jsx)("div",{className:"parameters",children:n})}function xe(e){e.image;var t=e.onBackgroundSelected,n=e.onNewAction,r=e.onSaveAction,o=e.onLoadAction,i=e.gcode,l=e.onGcodeAction,s=Object(Q.a)().t,h=g(),v=x(z).map((function(e,t){var n=e.lengthExpresion,c=e.label;return t<2?null:Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{children:c||t-1}),Object(j.jsx)("div",{children:Object(j.jsx)("input",{type:"text",value:n,onChange:function(e){var n={length:e.target.value,index:t};h(R(n))}})})]},t)})),p=Object(c.useState)(""),b=Object(d.a)(p,2),f=b[0],O=b[1],m=x(I),y="PATTERN:",M=[""].concat(Object(u.a)(Object.keys(window.localStorage).filter((function(e){return!e.indexOf(y)})).map((function(e){return e.replace(y,"")})))).map((function(e){return Object(j.jsx)("option",{value:e,children:e},e)}));return Object(j.jsx)(ve,{className:"controls",children:Object(j.jsxs)("form",{children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("input",{type:"button",value:"English",onClick:function(){return a.a.changeLanguage("en")}}),Object(j.jsx)("input",{type:"button",value:"Espa\xf1ol",onClick:function(){return a.a.changeLanguage("es")}})]}),Object(j.jsx)("div",{children:Object(j.jsx)("div",{children:Object(j.jsx)("input",{type:"button",value:s("New pattern"),onClick:function(){return n()}})})}),Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{children:s("Patterns")}),Object(j.jsx)("div",{children:Object(j.jsx)("select",{onChange:function(e){return o(e.target.value)},children:M})})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{children:s("New name")}),Object(j.jsx)("div",{children:Object(j.jsx)("input",{type:"text",value:m.name,onChange:function(e){return h(N(e.target.value))}})}),Object(j.jsx)("div",{children:Object(j.jsx)("input",{value:s("Save"),type:"button",onClick:function(){return r()}})})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{children:s("Background image url")}),Object(j.jsx)("div",{children:Object(j.jsx)("input",{type:"text",value:f,onChange:function(e){var n=e.target.value;O(n),t(n)}})})]}),Object(j.jsx)(je,{onChange:function(e,n){O(e),t(n)}}),Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{children:s("Scale")}),Object(j.jsx)("div",{children:Object(j.jsx)("input",{type:"number",value:m.scale,onChange:function(e){return h(S(e.target.valueAsNumber))}})})]}),Object(j.jsx)("div",{children:s("Parameters")}),Object(j.jsx)(ge,{}),Object(j.jsx)("div",{children:s("Guides")}),v,Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{children:s("gcode")}),Object(j.jsx)("div",{children:Object(j.jsx)("input",{type:"button",value:s("Generate"),onClick:function(){return l()}})}),Object(j.jsx)("textarea",{value:i,readOnly:!0,onClick:function(e){return e.target.select()}})]})]})})}var pe=n(55),be=["path"],fe=25;function Oe(e){var t=e.title,n=e.tool,c=e.toolMode,r=e.onClick,o=e.children;return Object(j.jsx)("button",{title:t,className:c===n?"active":"",onClick:function(){return r()},children:o})}function me(e){var t=e.path,n=Object(pe.a)(e,be);return Object(j.jsx)(Oe,Object(s.a)(Object(s.a)({},n),{},{children:Object(j.jsx)("svg",{width:fe,height:fe,children:Object(j.jsx)("path",{d:t,fillOpacity:"0%"})})}))}function ye(){var e=g(),t=x(X),n=x(oe),c=Object(Q.a)().t;return Object(j.jsx)(ve,{className:"toolbox",children:Object(j.jsxs)("div",{className:"tools",children:[Object(j.jsx)(Oe,{title:c("Move"),onClick:function(){return e(re("move"))},tool:"move",toolMode:n,children:Object(j.jsx)("svg",{viewBox:"0 0 320 512",width:"25",height:"25",children:Object(j.jsx)("path",{d:"M302.189 329.126H196.105l55.831 135.993c3.889 9.428-.555 19.999-9.444 23.999l-49.165 21.427c-9.165 4-19.443-.571-23.332-9.714l-53.053-129.136-86.664 89.138C18.729 472.71 0 463.554 0 447.977V18.299C0 1.899 19.921-6.096 30.277 5.443l284.412 292.542c11.472 11.179 3.007 31.141-12.5 31.141z"})})}),Object(j.jsx)(me,{path:"M10,0 V20",tool:"vguide",toolMode:n,title:c("Vertical guide"),onClick:function(){return e(re("vguide"))}}),Object(j.jsx)(me,{path:"M0,10 H20",tool:"hguide",toolMode:n,title:c("Horizontal guide"),onClick:function(){return e(re("hguide"))}}),Object(j.jsx)(Oe,{title:c("Add vertex"),onClick:function(){return e(re("handle"))},tool:"handle",toolMode:n,children:Object(j.jsx)("svg",{width:fe,height:fe,children:Object(j.jsx)("circle",{cx:12.5,cy:12.5,r:6.25,fill:"#000"})})}),Object(j.jsx)(me,{title:c("Convert to curve"),onClick:function(){return e(re("curve"))},path:"M6,0 Q30,20 6,25",tool:"curve",toolMode:n}),Object(j.jsx)(me,{title:c("Mirror"),onClick:function(){return e(G())},path:"M0,0 Q25,20 0,25 M25,0 Q0,20 25,25",tool:"mirror",toolMode:t?"mirror":""}),Object(j.jsx)(me,{title:c("Undo"),onClick:function(){return e(ie.ActionCreators.undo())},path:"M12.5,8C9.85,8 7.45,9 5.6,10.6L2,7V16H11L7.38,12.38C8.77,11.22 10.54,10.5 12.5,10.5C16.04,10.5 19.05,12.81 20.1,16L22.47,15.22C21.08,11.03 17.15,8 12.5,8Z",tool:"undo",toolMode:""}),Object(j.jsx)(me,{title:c("Redo"),onClick:function(){return e(ie.ActionCreators.redo())},path:"M18.4,10.6C16.55,9 14.15,8 11.5,8C6.85,8 2.92,11.03 1.54,15.22L3.9,16C4.95,12.81 7.95,10.5 11.5,10.5C13.45,10.5 15.23,11.22 16.62,12.38L13,16H22V7L18.4,10.6Z",tool:"redo",toolMode:""})]})})}var Me="curve",Ce={KeyN:"move",KeyP:"handle",KeyH:"hguide",KeyV:"vguide",KeyC:"clear",KeyS:Me};function we(){var e,t=g(),n=x(I),r=x(z),o=x(Y),a=x(oe),i=function(e){return t(re(e))},l=Object(c.useState)(null),v=Object(d.a)(l,2),p=v[0],b=v[1],f=Object(c.useState)(null),O=Object(d.a)(f,2),m=O[0],y=O[1],M=Object(c.useState)("pattern.png"),C=Object(d.a)(M,2),w=C[0],k=C[1],T=Object(c.useState)(""),R=Object(d.a)(T,2),D=R[0],X=R[1];function U(t,n){var c=e.createSVGPoint();c.x=t.clientX,c.y=t.clientY;var r=c.matrixTransform(e.getScreenCTM().inverse());return{type:n,originIndex:null,pos:n===Z?r.y:r.x,length:0,lengthExpresion:0,direction:1,label:""}}function F(){X(function(e,t){if(!e.length)return"";t*=10;var n=e[0],c=e=e.map((function(e){var c=Object(s.a)({},e);return c.x=(e.x-n.x)*t,c.y=(e.y-n.y)*-t,c}));e=Object(u.a)(e),console.log("generating gcode");var r=e.shift();if(!r)return"";var o=[],a=null;return e.forEach((function(e,t){if(t+=1,"control"===e.type)return a=e,void o.push("(control ".concat(t,")"));a?(new ne.a(c[t-2].x,c[t-2].y,c[t-1].x,c[t-1].y,e.x,e.y).getLUT(30).forEach((function(e){o.push("G1 X".concat(e.x," Y").concat(e.y," (").concat(t," step)"))})),a=null):o.push("G1 X".concat(e.x," Y").concat(e.y," (").concat(t,")"))})),"G0 Z".concat(10,"\nG0 X").concat(r.x," Y").concat(r.y," (0)\nG1 Z").concat(-5," F").concat(2e3,"\n").concat(o.join("\n"),"\nG0 Z").concat(10,"\n  ")}(n.mirror?ee(o):o,n.scale))}var Q={move:function(){},handle:function(n){if(n.altKey)t(E());else{var c=e.createSVGPoint();c.x=n.clientX,c.y=n.clientY;var r=c.matrixTransform(e.getScreenCTM().inverse());t(P({anchorX:null,anchorY:null,x:r.x,y:r.y,type:"end"}))}},hguide:function(e){t(B(U(e,Z)))},vguide:function(e){t(B(U(e,W)))}},$=1e3,_="0 0 ".concat($," ").concat(600);return Object(j.jsxs)("div",{className:"container",style:{border:"thin solid blue"},children:[Object(j.jsx)("div",{className:"controls",children:Object(j.jsx)(xe,{image:w,onBackgroundSelected:k,onNewAction:function(){console.log("new, clearing."),t(E()),t(L()),i("move"),b(null),y(null),t(S(1)),t(N(""))},onSaveAction:function(){de.save()},onLoadAction:function(e){""!==e?e!==n.name&&(de.load(e),i("move"),b(null),y(null)):t(N(""))},gcode:D,onGcodeAction:F})}),Object(j.jsx)(ye,{}),Object(j.jsxs)("svg",{id:"svg",ref:function(t){e=t},viewBox:_,className:"background-img",style:{border:"thin solid red",height:"100vh"},onClick:Q[a],onMouseUp:function(){b(null),y(null),t(H())},onMouseMove:function(n){if(null!==p||null!==m){var c=e.createSVGPoint();c.x=n.clientX,c.y=n.clientY;var a=c.matrixTransform(e.getScreenCTM().inverse());if(null!==p){var i=1e3,l=null,s=null;r.forEach((function(e,t){if(e.type===Z){var n=Math.abs(e.pos-a.y);n<i&&n<20&&(l=e,s=t,i=n)}})),l&&(a.y=l.pos),i=1e3;var u=null,d=-1;r.forEach((function(e,t){if(e.type===W){var n=Math.abs(e.pos-a.x);n<i&&n<20&&(u=e,d=t,i=n)}})),u&&(a.x=u.pos);var j={type:o[p].type,anchorY:s,anchorX:d,x:a.x,y:a.y};t(A({vertex:j,index:p}))}else if(null!==m){var h={x:a.x,y:a.y,index:m};t(K(h))}else console.error("weird")}},tabIndex:0,onKeyPress:function(e){var n=e.code;if("KeyC"===n)e.shiftKey&&(t(E()),t(L())),i("move");else if("KeyG"===n)F(),i("move");else if("KeyI"===n){var c=Object(u.a)(o);c.reverse(),t(V(c)),i("move")}else if("KeyR"===n){if(o.length){var r=o[0].x,a=o.map((function(e){var t=Object(s.a)({},e);return t.x=r-(e.x-r),t}));t(V(a))}i("move")}else"KeyM"===n?t(G()):i(Ce[n])},children:[Object(j.jsx)("image",{href:w,height:"100%"}),Object(j.jsx)(te,{vertices:o,mirror:n.mirror}),Object(j.jsx)(q,{width:$,height:600,scale:n.scale}),Object(j.jsx)(J,{width:$,height:600,onMouseDown:y}),Object(j.jsx)(h,{vertices:o,onMouseDown:b,onClick:function(e){if(a===Me){var n=o[e],c=Object(s.a)({},n);c.type="control";c.x=n.x+50,c.y=n.y+50;var r=Object(u.a)(o);r.splice(e,0,c),t(V(r))}}})]})]})}var ke=function(){return Object(j.jsx)(we,{})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(v.a,{store:se,children:Object(j.jsx)(ke,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[85,1,2]]]);
//# sourceMappingURL=main.f3115771.chunk.js.map
